import{a as W,b as K,P as Ve}from"./product-3cfcfa33.js";import{p as ge,ag as xe,be as ye,c as he,bf as be,q as we,ai as Ce,h as M,r as C,s as Pe,P as Fe,t as N,w as g,Q as _e,l as ke,ak as Se,al as ne,bg as Ie,j as t,bh as Ue,x as J,F as q,n as ae,o as Me,bi as Re,bj as Te,aJ as De,H as O,bk as Be,z as ze,S as Ee,T as L,ap as Q,U as X,W as Z,X as i,ar as S,am as Ne,an as He,aT as le,a0 as E,$ as j,ae as oe,Z as k,V as ie,_ as re}from"./index-792b7300.js";import{V as R}from"./VCol-6b418aff.js";import{V as ue}from"./VRow-0d652b6c.js";import{a as $e}from"./VSelect-3ad9041f.js";import{V as Ae}from"./VForm-b32d5c63.js";const Ge=ge({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...xe(),...ye()},"VTextarea"),Je=he()({name:"VTextarea",directives:{Intersect:be},inheritAttrs:!1,props:Ge(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,y){let{attrs:f,emit:l,slots:o}=y;const u=we(e,"modelValue"),{isFocused:s,focus:n,blur:d}=Ce(e),p=M(()=>typeof e.counterValue=="function"?e.counterValue(u.value):(u.value||"").toString().length),I=M(()=>{if(f.maxlength)return f.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function T(r,V){var v,x;!e.autofocus||!r||(x=(v=V[0].target)==null?void 0:v.focus)==null||x.call(v)}const c=C(),a=C(),m=Pe(""),w=C(),D=M(()=>e.persistentPlaceholder||s.value||e.active);function P(){var r;w.value!==document.activeElement&&((r=w.value)==null||r.focus()),s.value||n()}function H(r){P(),l("click:control",r)}function se(r){l("mousedown:control",r)}function de(r){r.stopPropagation(),P(),O(()=>{u.value="",Be(e["onClick:clear"],r)})}function ce(r){var v;const V=r.target;if(u.value=V.value,(v=e.modelModifiers)!=null&&v.trim){const x=[V.selectionStart,V.selectionEnd];O(()=>{V.selectionStart=x[0],V.selectionEnd=x[1]})}}const F=C(),B=C(+e.rows),$=M(()=>["plain","underlined"].includes(e.variant));Fe(()=>{e.autoGrow||(B.value=+e.rows)});function _(){e.autoGrow&&O(()=>{if(!F.value||!a.value)return;const r=getComputedStyle(F.value),V=getComputedStyle(a.value.$el),v=parseFloat(r.getPropertyValue("--v-field-padding-top"))+parseFloat(r.getPropertyValue("--v-input-padding-top"))+parseFloat(r.getPropertyValue("--v-field-padding-bottom")),x=F.value.scrollHeight,z=parseFloat(r.lineHeight),A=Math.max(parseFloat(e.rows)*z+v,parseFloat(V.getPropertyValue("--v-input-control-height"))),G=parseFloat(e.maxRows)*z+v||1/0,b=Ee(x??0,A,G);B.value=Math.floor((b-v)/z),m.value=ze(b)})}N(_),g(u,_),g(()=>e.rows,_),g(()=>e.maxRows,_),g(()=>e.density,_);let h;return g(F,r=>{r?(h=new ResizeObserver(_),h.observe(F.value)):h==null||h.disconnect()}),_e(()=>{h==null||h.disconnect()}),ke(()=>{const r=!!(o.counter||e.counter||e.counterValue),V=!!(r||o.details),[v,x]=Se(f),[{modelValue:z,...A}]=ne.filterProps(e),[G]=Ie(e);return t(ne,J({ref:c,modelValue:u.value,"onUpdate:modelValue":b=>u.value=b,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--plain-underlined":$.value},e.class],style:e.style},v,A,{centerAffix:B.value===1&&!$.value,focused:s.value}),{...o,default:b=>{let{isDisabled:U,isDirty:Y,isReadonly:me,isValid:fe}=b;return t(Ue,J({ref:a,style:{"--v-textarea-control-height":m.value},onClick:H,onMousedown:se,"onClick:clear":de,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},G,{active:D.value||Y.value,centerAffix:B.value===1&&!$.value,dirty:Y.value||e.dirty,disabled:U.value,focused:s.value,error:fe.value===!1}),{...o,default:ve=>{let{props:{class:ee,...te}}=ve;return t(q,null,[e.prefix&&t("span",{class:"v-text-field__prefix"},[e.prefix]),ae(t("textarea",J({ref:w,class:ee,value:u.value,onInput:ce,autofocus:e.autofocus,readonly:me.value,disabled:U.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:P,onBlur:d},te,x),null),[[Me("intersect"),{handler:T},null,{once:!0}]]),e.autoGrow&&ae(t("textarea",{class:[ee,"v-textarea__sizer"],id:`${te.id}-sizer`,"onUpdate:modelValue":pe=>u.value=pe,ref:F,readonly:!0,"aria-hidden":"true"},null),[[Re,u.value]]),e.suffix&&t("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:V?b=>{var U;return t(q,null,[(U=o.details)==null?void 0:U.call(o,b),r&&t(q,null,[t("span",null,null),t(Te,{active:e.persistentCounter||s.value,value:p.value,max:I.value},o.counter)])])}:void 0})}),De({},c,a,w)}}),qe=L({__name:"ProductDimensionForm",props:{modelValue:{type:W,required:!1}},emits:["update:model-value"],setup(e,{emit:y}){const f=e,l=Q({length:void 0,width:void 0,height:void 0,unit:void 0});g(()=>f.modelValue,s=>u(s)),N(()=>u(f.modelValue)),g(l,s=>{const n=W.fromJson({...s,unit:s.unit??"CM"});y("update:model-value",n)});let o=!0;function u(s){if(o){if(o=!1,s){const{length:n,width:d,height:p,unit:I}=s;l.length=n,l.width=d,l.height=p,l.unit=I}else l.length=l.width=l.height=void 0,l.unit=void 0;setTimeout(()=>o=!0,10)}}return(s,n)=>(X(),Z(ue,{justify:"space-between","no-gutters":""},{default:i(()=>[t(R,{cols:4},{default:i(()=>[t(S,{modelValue:l.length,"onUpdate:modelValue":n[0]||(n[0]=d=>l.length=d),modelModifiers:{number:!0},style:{"font-size":"30px"},step:.01,min:0,placeholder:"Length",class:"ml-2",variant:"outlined",density:"compact",type:"number"},{"prepend-inner":i(()=>[]),_:1},8,["modelValue"])]),_:1}),t(R,{cols:4},{default:i(()=>[t(S,{modelValue:l.width,"onUpdate:modelValue":n[1]||(n[1]=d=>l.width=d),modelModifiers:{number:!0},style:{"font-size":"30px"},step:.01,min:0,placeholder:"Width",class:"ml-2",variant:"outlined",density:"compact",type:"number"},{"prepend-inner":i(()=>[]),_:1},8,["modelValue"])]),_:1}),t(R,{cols:4},{default:i(()=>[t(S,{modelValue:l.height,"onUpdate:modelValue":n[2]||(n[2]=d=>l.height=d),modelModifiers:{number:!0},style:{"font-size":"30px"},step:.01,min:0,placeholder:"Height",class:"ml-2",variant:"outlined",density:"compact",type:"number"},{"prepend-inner":i(()=>[]),_:1},8,["modelValue"])]),_:1})]),_:1}))}}),Oe=L({__name:"ProductPriceForm",props:{modelValue:{type:K,required:!1}},emits:["update:model-value"],setup(e,{emit:y}){const f=e,l=[{code:"USD",symbol:"$"},{code:"GBP",symbol:"%"}],o=Q({currency:void 0,amount:void 0});g(()=>f.modelValue,n=>s(n)),N(()=>s(f.modelValue)),g(o,n=>{const d=K.fromJson(n);y("update:model-value",d)});let u=!0;function s(n){if(u){if(u=!1,n){const{amount:d,currency:p}=n;o.amount=d,o.currency=p}else o.amount=void 0,o.currency=void 0;setTimeout(()=>u=!0,10)}}return(n,d)=>(X(),Z(ue,{"no-gutters":""},{default:i(()=>[t(R,{cols:4},{default:i(()=>[t($e,{modelValue:o.currency,"onUpdate:modelValue":d[0]||(d[0]=p=>o.currency=p),items:l,"item-value":"code","item-title":"code",placeholder:"Currency",density:"compact",class:"ma-0 pa-0",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(R,{cols:8},{default:i(()=>[t(S,{modelValue:o.amount,"onUpdate:modelValue":d[1]||(d[1]=p=>o.amount=p),modelModifiers:{number:!0},style:{"font-size":"30px"},step:.01,min:0,placeholder:"Enter amount",class:"ml-2",variant:"outlined",density:"compact",type:"number"},{"prepend-inner":i(()=>[]),_:1},8,["modelValue"])]),_:1})]),_:1}))}}),Ze=L({__name:"ProductForm",props:{product:{type:Ve,required:!1},submiting:{type:Boolean,required:!1},height:{type:[String,Number],required:!1}},emits:["submit","cancel"],setup(e,{emit:y}){const f=e,l={title:void 0,price:void 0,dimension:void 0,weight:void 0,description:void 0};Ne();const o=He(),u=C(),s=C(),n=Q(l);g(()=>f.product,c=>T(c)),N(()=>T(f.product)),M(()=>f.height?f.height:"630px");async function d(){try{p();const{valid:c,error:a}=await s.value.validate();if(!c)throw new Error("Form not valid");y("submit",n)}catch(c){const a=c.message;o({text:a}),u.value=a}finally{}}function p(){u.value=void 0}function I(){y("cancel")}function T(c){var w,D;if(!c){for(const P in l){const H=l[P];n[P]=H}return}var a=c.dimension;a&&(a=W.fromJson({...((w=c.dimension)==null?void 0:w.toJson())??{},id:void 0}));var m=c.price;m&&(m=K.fromJson({...((D=c.price)==null?void 0:D.toJson())??{},id:void 0})),n.title=c.title,n.description=c.description,n.dimension=a,n.weight=c.weight,n.price=m}return(c,a)=>(X(),Z(Ae,{ref_key:"form",ref:s},{default:i(()=>[t(j,{flat:""},{default:i(()=>[le(c.$slots,"title"),t(E,null,{default:i(()=>[t(S,{modelValue:n.title,"onUpdate:modelValue":a[0]||(a[0]=m=>n.title=m),label:"Title",placeholder:"Enter Item label",variant:"outlined",density:"compact",counter:64},null,8,["modelValue"]),t(j,{flat:""},{default:i(()=>[t(oe,null,{default:i(()=>[k(" Price(Optional) ")]),_:1}),t(E,{class:"px-0 py-1"})]),_:1}),t(Oe,{modelValue:n.price,"onUpdate:modelValue":a[1]||(a[1]=m=>n.price=m)},null,8,["modelValue"]),t(j,{flat:""},{default:i(()=>[t(oe,null,{default:i(()=>[k(" Dimenssion(CM) ")]),_:1}),t(E,{class:"px-0 py-1"},{default:i(()=>[t(qe,{modelValue:n.dimension,"onUpdate:modelValue":a[2]||(a[2]=m=>n.dimension=m)},null,8,["modelValue"])]),_:1})]),_:1}),t(S,{modelValue:n.weight,"onUpdate:modelValue":a[3]||(a[3]=m=>n.weight=m),modelModifiers:{number:!0},label:"Weight(Kg)",placeholder:"Enter Item weight",variant:"outlined",density:"compact",type:"number",min:.001,step:.001},null,8,["modelValue"]),t(Je,{modelValue:n.description,"onUpdate:modelValue":a[4]||(a[4]=m=>n.description=m),label:"Description",placeholder:"Enter description",variant:"outlined",density:"compact",counter:255},null,8,["modelValue"])]),_:1}),t(E,{"r-v-if":"slots?.action"},{default:i(()=>[le(c.$slots,"action",{},()=>[t(ie,{onClick:a[5]||(a[5]=()=>d()),loading:e.submiting,color:"primary",variant:"flat"},{default:i(()=>[t(re,null,{default:i(()=>[k("mdi-content-save")]),_:1}),k(" Save ")]),_:1},8,["loading"]),t(ie,{onClick:a[6]||(a[6]=()=>I()),disabled:e.submiting,color:"primary",class:"mx-2",variant:"outlined"},{default:i(()=>[t(re,null,{default:i(()=>[k("mdi-cancel")]),_:1}),k(" Cancel ")]),_:1},8,["disabled"])])]),_:3})]),_:3})]),_:3},512))}});export{Je as V,Ze as _};
