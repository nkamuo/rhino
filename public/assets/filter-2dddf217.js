import{p as v,r as b,h as I,Y as M,P as L,aN as j,aK as w}from"./index-792b7300.js";const O=(t,l,e)=>t==null||l==null?-1:t.toString().toLocaleLowerCase().indexOf(l.toString().toLocaleLowerCase()),P=v({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function S(t,l,e){var g;const c=[],m=(e==null?void 0:e.default)??O,y=e!=null&&e.filterKeys?j(e.filterKeys):!1,F=Object.keys((e==null?void 0:e.customKeyFilter)??{}).length;if(!(t!=null&&t.length))return c;e:for(let f=0;f<t.length;f++){const a=t[f],h={},u={};let r=-1;if(l&&!(e!=null&&e.noFilter)){if(typeof a=="object"){const K=y||Object.keys(a);for(const s of K){const i=w(a,s,a),k=(g=e==null?void 0:e.customKeyFilter)==null?void 0:g[s];if(r=k?k(i,l,a):m(i,l,a),r!==-1&&r!==!1)k?h[s]=r:u[s]=r;else if((e==null?void 0:e.filterMode)==="every")continue e}}else r=m(a,l,a),r!==-1&&r!==!1&&(u.title=r);const n=Object.keys(u).length,d=Object.keys(h).length;if(!n&&!d||(e==null?void 0:e.filterMode)==="union"&&d!==F&&!n||(e==null?void 0:e.filterMode)==="intersection"&&(d!==F||!n))continue}c.push({index:f,matches:{...u,...h}})}return c}function _(t,l,e,c){const m=b([]),y=b(new Map),F=I(()=>c!=null&&c.transform?M(l).map(c==null?void 0:c.transform):M(l));L(()=>{const f=typeof e=="function"?e():M(e),a=typeof f!="string"&&typeof f!="number"?"":String(f),h=S(F.value,a,{customKeyFilter:t.customKeyFilter,default:t.customFilter,filterKeys:t.filterKeys,filterMode:t.filterMode,noFilter:t.noFilter}),u=M(l),r=[],n=new Map;h.forEach(d=>{let{index:K,matches:s}=d;const i=u[K];r.push(i),n.set(i.value,s)}),m.value=r,y.value=n});function g(f){return y.value.get(f.value)}return{filteredItems:m,filteredMatches:y,getMatches:g}}export{P as m,_ as u};
